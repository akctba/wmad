<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Merge Sort</title>
</head>
<body>
    <input type="text" id="array" value="6,2,5,3,8,7,1,4,11">
    <button type="button" onclick="start()">merge Sort!</button>
    <div id="output"></div>

    <script>
        var out = document.getElementById("output");
        
        function start() {
            // clean the output element
            out.innerHTML = "";

            //read the array from screen
            let textArray = document.getElementById("array").value;

            // break into a array, mapping to numbers
            let list = textArray.split(",").map(Number);

            //call the merge sort function
            out.innerHTML = mergeSort(list);
        }

        // Merge sort function - Alex Kayser
        function mergeSort(list) {

            // if there are only one element, it is sorted!
            if (list.length <= 1) {
                return list;
            }

            // find the middle point
            let mid = Math.floor(list.length/2);

            // divide in two parts
            let left = list.slice(0, mid);
            let right = list.slice(mid);

            // return the union of the sorted sides
            return merge (
                // sort left and right sides
                mergeSort(left), mergeSort(right)
            );
        }

        // Merge two lists, in order
        function merge(listA, listB) {

            //create the sorted array, empty
            let sorted = [];
            let aIndex = 0, bIndex = 0;

            // walk into both arrays, comparing the values
            // and putting in order in the new sorted array
            while (aIndex < listA.length && bIndex < listB.length) {
                if (listA[aIndex] < listB[bIndex]) {
                    sorted.push(listA[aIndex]);
                    aIndex++; // move 'A' array cursor
                } else {
                    sorted.push(listB[bIndex]);
                    bIndex++; // move 'B' array cursor
                }
            }

            // concating the remaining elements
            sorted = sorted.concat(listA.slice(aIndex));
            sorted = sorted.concat(listB.slice(bIndex));

            // return the sorted array
            return sorted;
        }
        
    </script>
    
</body>
</html>